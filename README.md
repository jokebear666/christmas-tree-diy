
# 3D 互动圣诞树 🎄

一个基于 React + Vite 的交互式 3D 圣诞树 Web 应用，结合 AI 手势识别与个性化照片，打造专属的节日体验。

![Project Preview](public/preview.png)

## ✨ 特性

- **沉浸式 3D 场景**: 使用 React Three Fiber (Three.js) 渲染高保真场景，包含树叶粒子、双面拍立得、闪烁彩灯、圣诞装饰物与顶部金色五角星。
- **AI 手势控制**: 集成 MediaPipe，通过摄像头识别手势进行交互。
    - **张开手掌 / 握拳**: 在“散开 ↔ 聚合”状态间切换圣诞树。
    - **左右/上下移动手掌**: 控制场景视角旋转与俯仰。
- **个性化照片墙**:
    - **自动扫描**: 启动时自动扫描 `src/assets/photos/` 目录下的图片 (支持 `.jpg`, `.jpeg`, `.png`, `.webp`)。
    - **动态上传**: 通过页面右下角“上传照片”按钮，可多选上传图片即时生成专属圣诞树。上传后仅使用本次上传的照片。
    - **顶部图片**: 文件名为 `top.*` (如 `top.jpg`) 的图片会被优先显示在顶部。
- **实时参数调节**: 通过右上角“参数设置”面板，可动态调整树叶粒子、照片挂件、圣诞元素与彩灯的数量，更改实时生效。
- **调试面板**: 点击右下角“🛠 DEBUG”按钮，可查看摄像头画面与手势关键点，便于调试识别效果。

## 🛠 技术栈

- **前端框架**: React 18, Vite
- **3D 渲染**: React Three Fiber (Three.js)
- **3D 工具库**: `@react-three/drei`, `@react-three/postprocessing`
- **AI 手势识别**: `@mediapipe/tasks-vision`
- **数学/粒子**: `maath`

## ⚙️ 环境要求

- **Node.js**: ≥ 18 (推荐 18 或 20)
- **包管理器**: npm
- **浏览器**: 支持 WebGL / WebAssembly 并允许摄像头访问 (Chrome, Edge, Firefox, Safari 等)

## 🚀 快速开始

1.  **克隆项目并安装依赖**
    ```bash
    npm install
    ```

2.  **启动开发服务器**
    ```bash
    npm run dev
    ```

## 📖 使用说明

### 手势控制
- **张开手掌 (Open Palm)**: 触发 `Disperse` (散开) 模式，圣诞树“炸裂”为漫天粒子与照片。
- **握紧拳头 (Closed Fist)**: 触发 `Assemble` (聚合) 模式，所有元素聚合回完整的圣诞树形态。
- **手掌左右移动**: 控制场景水平旋转。向左移动，树向左转；向右移动，树向右转。
- **手掌上下移动**: 控制场景俯仰视角。向上移动，抬高视角；向下移动，降低视角。

### 上传照片
点击页面右下角的 **“上传照片”** 按钮，从本地或手机相册中多选图片 (支持 `.jpg`, `.jpeg`, `.png`, `.webp`)。上传成功后，圣诞树将仅使用本次上传的照片进行渲染。

### 参数面板 (右上角“参数设置”)
- **树叶粒子数量**: 控制树身的粒子密度。数值越大越华丽，但对性能要求越高。
- **拍立得照片数量**: 设置照片挂件的数量。当照片数量不足时，纹理会循环使用。
- **圣诞元素数量**: 设置礼物盒、彩球、拐杖糖等装饰物的总数。
- **彩灯数量**: 设置闪烁的圣诞灯泡数量。

### 调试
点击右下角的 **“🛠 DEBUG”** 按钮，打开调试面板查看摄像头画面与手势关键点。如果首次使用提示权限被拒绝，请在浏览器地址栏弹出的提示中允许访问摄像头。

### 自定义启动照片
将你的图片放入 `src/assets/photos/` 目录下，应用启动时会自动扫描并加载。

## 📄 许可证

本项目基于 [MIT License](LICENSE) 开源。

**致谢**: 本项目在 [moleculemmeng020425/christmas-tree](https://github.com/moleculemmeng020425/christmas-tree) 的基础上进行修改与扩展。

---

## 🎅 圣诞快乐！ 🎄✨